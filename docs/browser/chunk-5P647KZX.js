import{a as q,b as j,c as D,d as k,e as L,f as U,g as V,h as z,i as B,j as J,k as K,l as Q,m as W,n as X}from"./chunk-FYSS65HN.js";import"./chunk-Q64FFBLU.js";import{a as T,b as u,c as R,d as G,e as M,f as h,g as I,h as N,i as A,j as P,k as O,l as H}from"./chunk-V4GCLY5P.js";import{d as C}from"./chunk-J7KYDSF3.js";import{Aa as c,Ba as d,L as l,M as v,X as f,Z as m,ab as E,ba as a,fa as p,ga as o,ha as t,ma as y,na as _,v as x,va as b,ya as F,za as w}from"./chunk-3AZF7BWD.js";var $=()=>({severity:"error",summary:"validation error",detail:"name is required"}),g=e=>[e],Y=()=>({severity:"error",summary:"validation error",detail:"must be at least 3 characters"}),Z=()=>({severity:"error",summary:"validation error",detail:"cannot exceed 20 char"}),ee=()=>({severity:"error",summary:"validation error",detail:"email is required"}),ie=()=>({severity:"error",summary:"validation error",detail:"email not valid"}),te=()=>({severity:"error",summary:"validation error",detail:"password is required"}),ne=()=>({severity:"error",summary:"validation error",detail:"rePassword not match `password`"});function oe(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,$)))("enableService",!1)("closable",!1)}function re(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,Y)))("enableService",!1)("closable",!1)}function ae(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,Z)))("enableService",!1)("closable",!1)}function se(e,s){if(e&1&&f(0,oe,1,6,"p-messages",16)(1,re,1,6,"p-messages",16)(2,ae,1,6,"p-messages",16),e&2){let i=_();a(0,i.name.getError("required")?0:-1),l(),a(1,i.name.getError("minlength")?1:-1),l(),a(2,i.name.getError("maxlength")?2:-1)}}function le(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,ee)))("enableService",!1)("closable",!1)}function me(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,ie)))("enableService",!1)("closable",!1)}function pe(e,s){if(e&1&&f(0,le,1,6,"p-messages",16)(1,me,1,6,"p-messages",16),e&2){let i=_();a(0,i.email.getError("required")?0:-1),l(),a(1,i.email.getError("email")?1:-1)}}function ce(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,te)))("enableService",!1)("closable",!1)}function de(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,Y)))("enableService",!1)("closable",!1)}function ue(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,Z)))("enableService",!1)("closable",!1)}function fe(e,s){if(e&1&&f(0,ce,1,6,"p-messages",16)(1,de,1,6,"p-messages",16)(2,ue,1,6,"p-messages",16),e&2){let i=_();a(0,i.password.getError("required")?0:-1),l(),a(1,i.password.getError("minlength")?1:-1),l(),a(2,i.password.getError("maxlength")?2:-1)}}function ge(e,s){e&1&&t(0,"p-messages",16),e&2&&m("value",d(4,g,c(3,ne)))("enableService",!1)("closable",!1)}function ve(e,s){if(e&1&&f(0,ge,1,6,"p-messages",16),e&2){let i=_();a(0,i.rePassword.getError("passNoMatch")?0:-1)}}var ke=(()=>{class e{constructor(i,n,r,S){this.authService_=i,this._messageService=n,this._ngxSpinnerService=r,this._router=S,this.initFormControls(),this.initFormGroup()}initFormControls(){this.name=new h("",[u.required,u.minLength(3),u.maxLength(20)]),this.email=new h("",[u.required,u.email]),this.password=new h("",[u.required,u.minLength(3),u.maxLength(20)]),this.rePassword=new h("",[u.required,this.passwordMatch(this.password)])}initFormGroup(){this.registrationForm=new M({name:this.name,email:this.email,password:this.password,rePassword:this.rePassword})}passwordMatch(i){return n=>i.value!==n.value||n.value===""?{passNoMatch:!0}:null}submit(){this.registrationForm.valid?this.siginUp(this.registrationForm.value):(this.registrationForm.markAllAsTouched(),Object.keys(this.registrationForm.controls).forEach(i=>this.registrationForm.controls[i].markAsDirty()))}siginUp(i){this._ngxSpinnerService.show(),this.authService_.register(i).subscribe({next:n=>{n._id&&this.show("success","Success","Success Register"),this._ngxSpinnerService.hide(),this._router.navigate(["login"])},error:n=>{console.log(n.error.error),this.show("error","Error",n.error.error),this._ngxSpinnerService.hide()}})}show(i,n,r){this._messageService.add({severity:i,summary:n,detail:r})}static{this.\u0275fac=function(n){return new(n||e)(v(X),v(C),v(q),v(E))}}static{this.\u0275cmp=x({type:e,selectors:[["app-register"]],standalone:!0,features:[F([C]),w],decls:37,vars:6,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-user"],["pInputText","","formControlName","name","placeholder","Username"],[1,"validation-smg"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","Email"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","placeholder","Password"],[1,"validation-msg"],["pInputText","","type","password","formControlName","rePassword","placeholder","RePassword"],["type","submit","label","Submit"],[1,"card","flex","justify-content-center"],["bdColor","rgba(0,0,0,0.3)","size","large","color","#3b82f1","type","ball-triangle-path",3,"fullScreen"],[3,"value","enableService","closable"]],template:function(n,r){n&1&&(p(0,"section")(1,"div",0)(2,"h1",1),b(3,"register form"),o(),p(4,"form",2),y("ngSubmit",function(){return r.submit()}),p(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),t(8,"i",4),o(),t(9,"input",5),o(),p(10,"div",6),f(11,se,3,3),o()(),p(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),t(15,"i",7),o(),t(16,"input",8),o(),p(17,"div",6),f(18,pe,2,2),o()(),p(19,"div",3)(20,"p-inputGroup")(21,"p-inputGroupAddon"),t(22,"i",9),o(),t(23,"input",10),o(),p(24,"div",11),f(25,fe,3,3),o()(),p(26,"div",3)(27,"p-inputGroup")(28,"p-inputGroupAddon"),t(29,"i",9),o(),t(30,"input",12),o(),p(31,"div",11),f(32,ve,1,1),o()(),t(33,"p-button",13),o()(),p(34,"div",14),t(35,"p-toast"),o()(),t(36,"ngx-spinner",15)),n&2&&(l(4),m("formGroup",r.registrationForm),l(7),a(11,r.name&&r.name.touched?11:-1),l(7),a(18,r.email&&r.email.touched?18:-1),l(7),a(25,r.password.touched&&r.password?25:-1),l(7),a(32,r.rePassword.touched&&r.rePassword?32:-1),l(4),m("fullScreen",!1))},dependencies:[P,I,T,R,G,N,A,V,U,B,z,H,O,L,k,K,J,W,Q,D,j]})}}return e})();export{ke as RegisterComponent};
