import './polyfills.server.mjs';
import{a as q,b as D,c as k,d as V,e as z,f as B,g as P,h as R,i as O,j as K,k as Q,l as U,m as W,n as X}from"./chunk-DST6SFSZ.mjs";import"./chunk-C36JLGKF.mjs";import{a as T,b as d,c as G,d as I,e as L,f as S,g as M,h as N,i as A,j,k as H,l as J}from"./chunk-Y7SCNAFE.mjs";import{d as _}from"./chunk-RWQVWPIP.mjs";import{Ba as F,Db as E,Ea as x,Fa as w,Ga as c,Ha as u,R as a,S as f,ba as g,da as s,ha as l,la as m,ma as r,na as o,sa as b,t as y,ta as h}from"./chunk-JGA7J6GU.mjs";import"./chunk-VVCT4QZE.mjs";var Y=()=>({severity:"error",summary:"validation error",detail:"email is required"}),v=e=>[e],Z=()=>({severity:"error",summary:"validation error",detail:"email not valid"}),$=()=>({severity:"error",summary:"validation error",detail:"password is required"}),ee=()=>({severity:"error",summary:"validation error",detail:"must be at least 3 characters"}),ie=()=>({severity:"error",summary:"validation error",detail:"cannot exceed 20 char"});function te(e,p){e&1&&o(0,"p-messages",13),e&2&&s("value",u(4,v,c(3,Y)))("enableService",!1)("closable",!1)}function oe(e,p){e&1&&o(0,"p-messages",13),e&2&&s("value",u(4,v,c(3,Z)))("enableService",!1)("closable",!1)}function ne(e,p){if(e&1&&g(0,te,1,6,"p-messages",13)(1,oe,1,6,"p-messages",13),e&2){let i=h();l(0,i.email.getError("required")?0:-1),a(),l(1,i.email.getError("email")?1:-1)}}function re(e,p){e&1&&o(0,"p-messages",13),e&2&&s("value",u(4,v,c(3,$)))("enableService",!1)("closable",!1)}function ae(e,p){e&1&&o(0,"p-messages",13),e&2&&s("value",u(4,v,c(3,ee)))("enableService",!1)("closable",!1)}function se(e,p){e&1&&o(0,"p-messages",13),e&2&&s("value",u(4,v,c(3,ie)))("enableService",!1)("closable",!1)}function le(e,p){if(e&1&&g(0,re,1,6,"p-messages",13)(1,ae,1,6,"p-messages",13)(2,se,1,6,"p-messages",13),e&2){let i=h();l(0,i.password.getError("required")?0:-1),a(),l(1,i.password.getError("minlength")?1:-1),a(),l(2,i.password.getError("maxlength")?2:-1)}}var Le=(()=>{class e{constructor(i,t,n,C){this.authService_=i,this._messageService=t,this._ngxSpinnerService=n,this._router=C,this.initFormControls(),this.initFormGroup()}initFormControls(){this.email=new S("",[d.required,d.email]),this.password=new S("",[d.required,d.minLength(3),d.maxLength(20)])}initFormGroup(){this.loginForm=new L({email:this.email,password:this.password})}submit(){this.loginForm.valid?this.siginIn(this.loginForm.value):(this.loginForm.markAllAsTouched(),Object.keys(this.loginForm.controls).forEach(i=>this.loginForm.controls[i].markAsDirty()))}siginIn(i){this._ngxSpinnerService.show(),this.authService_.login(i).subscribe({next:t=>{t._id&&this.show("success","Success","Success Login"),this._ngxSpinnerService.hide(),this._router.navigate(["user"])},error:t=>{console.log(t.error.error),this.show("error","Error",t.error.error),this._ngxSpinnerService.hide()}})}show(i,t,n){this._messageService.add({severity:i,summary:t,detail:n})}static{this.\u0275fac=function(t){return new(t||e)(f(X),f(_),f(q),f(E))}}static{this.\u0275cmp=y({type:e,selectors:[["app-login"]],standalone:!0,features:[x([_]),w],decls:23,vars:4,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","Email"],[1,"validation-smg"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","placeholder","Password"],[1,"validation-msg"],["type","submit","label","Login"],[1,"card","flex","justify-content-center"],["bdColor","rgba(0,0,0,0.1)","size","large","color","#3b82f1","type","ball-triangle-path",3,"fullScreen"],[3,"value","enableService","closable"]],template:function(t,n){t&1&&(m(0,"section")(1,"div",0)(2,"h1",1),F(3,"login"),r(),m(4,"form",2),b("ngSubmit",function(){return n.submit()}),m(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),o(8,"i",4),r(),o(9,"input",5),r(),m(10,"div",6),g(11,ne,2,2),r()(),m(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),o(15,"i",7),r(),o(16,"input",8),r(),m(17,"div",9),g(18,le,3,3),r()(),o(19,"p-button",10),r()(),m(20,"div",11),o(21,"p-toast"),r()(),o(22,"ngx-spinner",12)),t&2&&(a(4),s("formGroup",n.loginForm),a(7),l(11,n.email&&n.email.touched?11:-1),a(7),l(18,n.password.touched&&n.password?18:-1),a(4),s("fullScreen",!1))},dependencies:[j,M,T,G,I,N,A,P,B,O,R,J,H,z,V,Q,K,W,U,k,D]})}}return e})();export{Le as LoginComponent};
